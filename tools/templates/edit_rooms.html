<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Room Dimensions – {{ job_id }}</title>
    <style>
        body {font-family: Arial, sans-serif; margin: 2rem;}
        table {border-collapse: collapse; width: 100%; max-width: 800px;}
        th, td {border: 1px solid #ccc; padding: 0.5rem; text-align: left;}
        th {background-color: #f4f4f4;}
        input[type="number"] {width: 80px;}
        .center {text-align: center;}
        .error {color: red; margin-top: 0.5rem;}
    </style>
</head>
<body>
    <h1>Room Dimensions – {{ job_id }}</h1>

    {% if error %}
        <p class="error">{{ error }}</p>
    {% endif %}

    <form method="post" action="{{ url_for('save_rooms', job_id=job_id) }}">
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th>Room Name</th>
                    <th>Width (ft)</th>
                    <th>Length (ft)</th>
                    <th>Height (ft)</th>
                    <th>Area (sq ft)</th>
                </tr>
            </thead>
            <tbody>
                {% for i, row in enumerate(room_rows) %}
                <tr>
                    <td class="center">{{ i + 1 }}</td>
                    <td>{{ row.Room }}</td>
                    <td><input type="number" step="0.01"
                               name="width_{{ i }}" value="{{ row.Width|default('') }}" required></td>
                    <td><input type="number" step="0.01"
                               name="length_{{ i }}" value="{{ row.Length|default('') }}" required></td>
                    <td><input type="number" step="0.01"
                               name="height_{{ i }}" value="{{ row.Height|default('') }}" required></td>
                    <td class="center">
                        {{ (row.Width|float * row.Length|float) | round(2) if row.Width and row.Length else '' }}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <br>
        <button type="submit">Save & Continue → Run Pipeline</button>
    </form>

    <br>
    <a href="{{ url_for('home') }}">← Back to Upload Page</a>
</body>
</html>

